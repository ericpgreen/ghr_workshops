<!DOCTYPE html>
<html lang="en"><head>
<script src="2023-06-28_eldoret_causal-inference_files/libs/clipboard/clipboard.min.js"></script>
<script src="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/tabby.min.js"></script>
<script src="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/popper.min.js"></script>
<script src="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="2023-06-28_eldoret_causal-inference_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Eric Green">
  <title>Causal Inference Workshop</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="2023-06-28_eldoret_causal-inference_files/libs/countdown-0.4.0/countdown.css" rel="stylesheet">
  <script src="2023-06-28_eldoret_causal-inference_files/libs/countdown-0.4.0/countdown.js"></script>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/title.png" data-background-opacity="1" data-background-size="contain" class="quarto-title-block center">
  <h1 class="title">Causal Inference Workshop</h1>
  <p class="subtitle">Eldoret, June 2023</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Eric Green 
</div>
</div>
</div>

</section>
<section id="section" class="slide level2" data-background-image="img/FallMini2022-11.jpg">
<h2></h2>
</section>
<section id="todays-agenda" class="slide level2">
<h2>Today‚Äôs Agenda</h2>
<div class="columns">
<div class="column" style="width:90%;">
<table>
<thead>
<tr class="header">
<th>Time</th>
<th style="text-align: left;">Topic</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>10:00-10:30</td>
<td style="text-align: left;">The challenge of causal inference</td>
</tr>
<tr class="even">
<td>10:30-11:00</td>
<td style="text-align: left;">Confounder control and causal diagrams</td>
</tr>
<tr class="odd">
<td>11:00-11:10</td>
<td style="text-align: left;">‚òïÔ∏è Coffee/tea break</td>
</tr>
<tr class="even">
<td>11:10-12:00</td>
<td style="text-align: left;">Malaria DAG</td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="thursday-and-friday" class="slide level2">
<h2>Thursday and Friday ü§ù</h2>
<p>Available for 1-on-1s or small group consultation. Sign-up for a slot at <a href="https://ghr.link/meeting-eld23">ghr.link/meeting-eld23</a></p>

<img data-src="img/QR_meeting.png" class="r-stretch"></section>
<section id="section-1" class="slide level2" data-background-image="img/coffee.png">
<h2></h2>
</section>
<section id="observational-findings" class="slide level2">
<h2>Observational Findings</h2>
<p><a href="https://www.ahajournals.org/doi/10.1161/CIRCULATIONAHA.115.017341">Ding et al.&nbsp;(2015)</a> conducted a pooled analysis of three large prospective cohort studies of health professionals in the U.S. (95% white) followed for up to 36 years:</p>
<blockquote>
<p>Higher consumption of total coffee, caffeinated coffee, and decaffeinated coffee was associated with lower risk of total mortality‚Ä¶Relative to no consumption of coffee, the pooled hazard ratio for death was 0.95 (95% confidence interval [CI], 0.91‚Äì0.99) for 1.0 or less cup of total coffee per day.</p>
</blockquote>
<p>In other words, the sort of people who drink a cup of coffee daily have a 5% lower risk of dying over 2 to 3 decades.</p>
</section>
<section id="causal-deniability" class="slide level2">
<h2>Causal Deniability</h2>
<p>Does this mean that coffee prevents death? The study authors say no. But also, maybe!</p>
<p><strong>Step 1: Avoid the word ‚Äúcausal‚Äù and warn that correlation is not causation.</strong></p>
<blockquote>
<p>‚Ä¶given the observational nature of the study design, we could not directly establish a cause-effect relationship between coffee and mortality.</p>
</blockquote>
</section>
<section id="causal-deniability-1" class="slide level2">
<h2>Causal Deniability</h2>
<p>Does this mean that coffee prevents death? The study authors say no. But also, maybe!</p>
<p><span style="color:rgba(178, 190, 181);">Step 1: Avoid the word ‚Äúcausal‚Äù and warn that correlation is not causation.</span></p>
<p><strong>Step 2: Ignore the warning and make policy or health recommendations based on a causal interpretation of the findings.</strong></p>
<blockquote>
<p>‚Ä¶coffee consumption can be incorporated into a healthy lifestyle‚Ä¶moderate consumption of coffee may confer health benefits in terms of reducing premature death.</p>
</blockquote>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_9ba87358" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="so-which-is-it-a-non-causal-association-or-a-causal-effect" class="slide level2">
<h2>So which is it, a non-causal association or a causal effect?</h2>
<p><a href="https://ajph.aphapublications.org/doi/full/10.2105/AJPH.2018.304337">Hern√°n (2018)</a> argues that scientists need to stop the charade:</p>
<blockquote>
<p>We need to stop treating ‚Äúcausal‚Äù as a dirty word that respectable investigators do not say in public or put in print. It is true that observational studies cannot definitely prove causation, but this statement misses the point‚Ä¶</p>
</blockquote>
<p>According to Hern√°n, the point is that we have to be clear about our scientific goals and use language that reflects these goals.</p>
</section>
<section id="what-is-our-goal-what-do-we-want-to-know" class="slide level2">
<h2>What is our goal? What do we want to know?</h2>
<p><br></p>
<p><span class="fragment" style="font-size:150%;">A. Whether the sort of people who drink a cup of coffee daily have a lower risk of dying</span></p>
<p><span class="fragment" style="font-size:150%;">B. Whether drinking a cup of coffee daily lowers the risk of dying?</span></p>
</section>
<section id="what-is-our-goal-what-do-we-want-to-know-1" class="slide level2">
<h2>What is our goal? What do we want to know?</h2>
<p><br></p>
<p><span style="font-size:150%; color:rgba(178, 190, 181);">A. Whether the sort of people who drink a cup of coffee daily have a lower risk of dying</span></p>
<p><span style="font-size:150%; background-color:rgba(244, 186, 2);">B. Whether drinking a cup of coffee daily lowers the risk of dying?</span></p>
</section>
<section id="to-answer-this-question-we-need-causal-inference" class="slide level2">
<h2>To answer this question we need causal inference</h2>
<p><br></p>
<p><span style="font-size:150%; color:rgba(178, 190, 181);">A. Whether the sort of people who drink a cup of coffee daily have a lower risk of dying</span></p>
<p><span style="font-size:150%; background-color:rgba(244, 186, 2);">B. Whether drinking a cup of coffee daily lowers the risk of dying?</span></p>
</section>
<section>
<section id="causal-inference" class="title-slide slide level1 center" data-background="linear-gradient(0deg, #00529b, #1f9ac9)">
<h1><span style="color:white; font-size:200%;">Causal Inference</span></h1>

</section>
<section id="causal-inference-1" class="slide level2">
<h2>Causal Inference</h2>
<p>Causal inference is what we do when we identify and estimate the causal effect of some proposed cause on an outcome of interest.</p>
<center>
<img data-src="img/causeeffect.png">
</center>
</section>
<section id="counterfactual-thinking" class="slide level2">
<h2>Counterfactual Thinking</h2>
<p><span style="font-size:150%; background-color:rgba(244, 186, 2);">Causal inference is an exercise in counterfactual thinking, full of ‚Äúwhat if‚Äù questions about the road not taken.</span></p>
<p>A counterfactual is the hypothetical state of a ‚Äúwhat if‚Äù question. With counterfactual thinking, there is what actually happened, and then there is the hypothetical counterfactual of what would have happened, counter to fact, under the alternative scenario. The difference between what did happen and what would have happened is a known as the causal effect.</p>
</section>
<section id="section-2" class="slide level2" data-background-image="img/road less traveled 0.svg">
<h2></h2>
</section>
<section id="section-3" class="slide level2" data-background-image="img/road less traveled 1.svg">
<h2></h2>
</section>
<section id="section-4" class="slide level2" data-background-image="img/road less traveled 2.svg">
<h2></h2>
</section>
<section id="section-5" class="slide level2" data-background-image="img/road less traveled 3.svg">
<h2></h2>
</section>
<section id="section-6" class="slide level2" data-background-image="img/road less traveled 4.svg">
<h2></h2>
</section>
<section id="section-7" class="slide level2" data-background-image="img/po.png">
<h2></h2>
</section>
<section id="back-to-reality" class="slide level2">
<h2>Back to Reality</h2>
<p>We‚Äôre not all knowing, of course, and we only get to observe one potential outcome for each person. This means we have to estimate the ATE by comparing people like Robert who take the road less traveled to people who take the road more traveled. But how do people come to take one road versus the other?</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_380559a3" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="who-gets-treated" class="slide level2">
<h2>Who Gets ‚ÄúTreated‚Äù?</h2>
<p>Let‚Äôs consider two scenarios:</p>
<ol type="1">
<li class="fragment">Travelers are <strong>randomly assigned</strong> to a road. They come to the fork in the road and pull directions out of a hat.</li>
<li class="fragment">Travelers <strong>select</strong> a road themselves. They go with their gut and all happen to pick the road that maximizes their individual happiness.</li>
</ol>
</section>
<section id="section-8" class="slide level2" data-background-image="img/po2.png">
<h2></h2>
</section>
<section id="randomization-neutralizes-selection-bias" class="slide level2">
<h2>Randomization Neutralizes Selection Bias‚Ä¶</h2>
<p>The simple difference in outcomes between groups consists of the average treatment effect + bias. Under perfect randomization, there is no bias, so the difference in outcomes is just the ATE.</p>
</section>
<section id="but-randomization-is-not-always-possible-or-maintained" class="slide level2">
<h2>‚Ä¶But Randomization is Not Always Possible or Maintained</h2>
<p>Most research is non-experimental, or what many would call observational. Selection bias is always a concern in these studies. Our only defense against being fooled by selection bias is research design and statistical adjustment. As <a href="https://mixtape.scunning.com/">Cunningham (2020)</a> states:</p>
<blockquote>
<p>One could argue that the entire enterprise of causal inference is about developing a reasonable strategy for negating the role that selection bias is playing in estimated causal effects.</p>
</blockquote>
</section>
<section id="causal-inference-methods" class="slide level2">
<h2>Causal Inference Methods</h2>
<p><a href="https://pubmed.ncbi.nlm.nih.gov/31890846/">Matthay et al.&nbsp;(2020)</a> divide non-experimental approaches to causal inference into two main buckets: confounder-control and instrument-based.<sup>1</sup></p>
<p><strong>Confounder-control</strong> is characterized by the use of statistical adjustment to make groups more comparable.</p>
<p><strong>Instrument-based studies</strong>, sometimes called <strong>quasi-experimental designs</strong>, estimate treatment effects by finding and leveraging arbitrary reasons why some people are more likely to be treated or exposed.</p>
<aside><ol class="aside-footnotes"><li id="fn1"><p>You might also come across references to Bradford Hill‚Äôs Considerations and the sufficient-component cause model.</p></li></ol></aside></section></section>
<section>
<section id="causal-diagrams-and-confounder-control" class="title-slide slide level1 center" data-background="linear-gradient(0deg, #00529b, #1f9ac9)">
<h1><span style="color:white; font-size:150%;">Causal Diagrams and Confounder Control</span></h1>

</section>
<section id="section-9" class="slide level2" data-background-image="img/road less traveled 5.svg">
<h2></h2>
</section>
<section id="data-are-dumb" class="slide level2">
<h2>Data Are Dumb</h2>
<p>As Pearl and Mackenzie tell us in the <a href="https://amzn.to/3CKyjnP"><em>Book of Why</em></a>, cofounder control is not just an exercise in statistics because data are profoundly dumb. A dataset cannot tell us which variables to adjust for, or what is a cause and what is an effect. For that we need information that lives outside of statistical models. We need causal models that are informed by domain expertise (<a href="https://amzn.to/3FdX2mk">McElreath, 2020</a>).</p>
</section>
<section id="dag" class="slide level2" data-background-image="img/dag example.svg" data-background-size="99%" data-background-color="white">
<h2>DAG</h2>
</section>
<section id="section-10" class="slide level2" data-background-image="img/road less traveled 6.svg">
<h2></h2>
</section>
<section id="section-11" class="slide level2" data-background-image="img/road less traveled 7.svg">
<h2></h2>
</section>
<section id="section-12" class="slide level2" data-background-image="img/road less traveled 8.svg">
<h2></h2>
</section>
<section id="section-13" class="slide level2" data-background-image="img/road less traveled 9.svg">
<h2></h2>
</section>
<section id="section-14" class="slide level2" data-background-image="img/road less traveled 10.svg">
<h2></h2>
</section>
<section id="section-15" class="slide level2" data-background-image="img/road less traveled 11.svg">
<h2></h2>
</section>
<section id="section-16" class="slide level2" data-background-image="img/road less traveled 12.svg">
<h2></h2>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_15cb69f2" data-update-every="1" tabindex="0" style="top:0;left:1;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">02</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="section-17" class="slide level2" data-background-image="img/road less traveled 13.svg">
<h2></h2>
</section>
<section id="effect-identification" class="slide level2">
<h2>Effect Identification</h2>
<p>Next we need to determine which paths are good and which are bad (<a href="https://theeffectbook.net/">Huntington-Klein, 2021</a>). ‚ÄúGood paths‚Äù identify our research question. ‚ÄúBad paths‚Äù are the alternate explanations for the causal effect that we need to close. In our example DAG, as in many DAGS, good paths often start with an arrow exiting the proposed cause and bad paths have arrows entering the proposed cause.</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_7a86e305" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">01</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="section-18" class="slide level2" data-background-image="img/road dag paths.svg" data-background-size="99%" data-background-color="white">
<h2></h2>
</section>
<section id="section-19" class="slide level2" data-background-image="img/road less traveled 14.svg">
<h2></h2>
</section>
<section id="section-20" class="slide level2" data-background-image="img/road less traveled 15.svg">
<h2></h2>
</section>
<section id="section-21" class="slide level2" data-background-image="img/road less traveled 16.svg">
<h2></h2>
</section>
<section id="simulated-example-ate1.5" class="slide level2" data-background-image="img/fig-confounding-1.png" data-background-size="99%" data-background-color="white">
<h2>Simulated Example (ATE=1.5)</h2>
</section>
<section id="section-22" class="slide level2" data-background-image="img/road less traveled 17.svg">
<h2></h2>
</section>
<section id="section-23" class="slide level2" data-background-image="img/road less traveled 18.svg">
<h2></h2>
</section>
<section id="coffeetea-break" class="slide level2">
<h2>‚òïÔ∏è Coffee/tea break</h2>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_d9b44a40" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">10</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section></section>
<section>
<section id="malaria-example" class="title-slide slide level1 center" data-background="linear-gradient(0deg, #00529b, #1f9ac9)">
<h1><span style="color:white; font-size:150%;">Malaria Example</span></h1>

</section>
<section id="draw-a-dag-with-a-partner" class="slide level2">
<h2>Draw a DAG with a Partner</h2>
<p>The research question is:</p>
<p><span style="font-size:150%; background-color:rgba(244, 186, 2);">Does using a mosquito net decrease an individual‚Äôs risk of contracting malaria?</span></p>
<p>Imagine that you can collect data on environmental factors, individual health, and household characteristics, but you cannot randomly assign households to receive or use mosquito nets. You have to answer this question with an observational study.<sup>1</sup></p>
<p>What is in your DAG?</p>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_6d9e1038" data-update-every="1" tabindex="0" style="right:0;bottom:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
<aside><ol class="aside-footnotes"><li id="fn2"><p>This really nice example comes from <a href="https://evalf22.classes.andrewheiss.com/example/dags.html#mosquito-net-example">Andrew Heiss</a>.</p></li></ol></aside></section>
<section id="section-24" class="slide level2" data-background-image="img/road less traveled 19.svg">
<h2></h2>
</section>
<section id="section-25" class="slide level2" data-background-image="img/road less traveled 20.svg">
<h2></h2>
</section>
<section id="section-26" class="slide level2" data-background-image="img/road less traveled 21.svg">
<h2></h2>
</section>
<section id="list-the-pathways" class="slide level2" data-background-color="white">
<h2>List the Pathways</h2>
<div class="columns">
<div class="column" style="width:60%;">
<center>
<img data-src="img/malariadag.png">
</center>
</div><div class="column" style="width:40%;">
<p>There is a direct path between mosquito net use and the risk of malaria, but the effect is not causally identified due to several other open paths. List all of the paths and find which open paths have arrows pointing backwards into the mosquito net node.</p>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div class="countdown" id="timer_10dfc556" data-update-every="1" tabindex="0" style="top:0;right:0;">
<div class="countdown-controls"><button class="countdown-bump-down">‚àí</button><button class="countdown-bump-up">+</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">03</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
</div>
</div>
</section>
<section id="two-shortcuts" class="slide level2">
<h2>Two Shortcuts</h2>
<p>Drawing DAGs by hand is a good learning exercise, but there is an easier way:</p>
<ol type="1">
<li class="fragment">Draw your DAG on <a href="http://dagitty.net/m1k_2Mk">DAGitty.net</a></li>
<li class="fragment">Copy the code</li>
<li class="fragment">Paste the code into R</li>
<li class="fragment">In R use the {<code>dagitty</code>} package to analyze your DAG</li>
</ol>
</section>
<section id="section-27" class="slide level2" data-background-image="img/dagitty.png">
<h2></h2>
</section>
<section id="section-28" class="slide level2" data-background-iframe="http://dagitty.net/m1k_2Mk">
<h2></h2>
</section>
<section id="paste-code-into-r" class="slide level2">
<h2>Paste Code into R</h2>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1">Code</a></li><li><a href="#tabset-1-2">Plot</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="co"># Load packages</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(dagitty)   </span>
<span id="cb1-3"><a href="#cb1-3"></a></span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="co"># 'content between quotes' pasted from DAGitty.net</span></span>
<span id="cb1-5"><a href="#cb1-5"></a>mosquito_dag <span class="ot">&lt;-</span> <span class="fu">dagitty</span>(<span class="st">'dag {</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="st">  bb="0,0,1,1"</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="st">  "eligible for program" [pos="0.303,0.552"]</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="st">  "household size" [pos="0.222,0.393"]</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="st">  "insecticide resistance" [pos="0.623,0.251"]</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="st">  "mosquito net" [exposure,pos="0.338,0.393"]</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="st">  "nighttime temps" [pos="0.471,0.273"]</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="st">  "risk of malaria" [outcome,pos="0.616,0.396"]</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="st">  health [pos="0.469,0.493"]</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="st">  income [pos="0.473,0.697"]</span></span>
<span id="cb1-15"><a href="#cb1-15"></a><span class="st">  "eligible for program" -&gt; "mosquito net"</span></span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="st">  "household size" -&gt; "eligible for program"</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="st">  "household size" -&gt; "mosquito net"</span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="st">  "insecticide resistance" -&gt; "risk of malaria"</span></span>
<span id="cb1-19"><a href="#cb1-19"></a><span class="st">  "mosquito net" -&gt; "risk of malaria"</span></span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="st">  "nighttime temps" -&gt; "mosquito net"</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="st">  "nighttime temps" -&gt; "risk of malaria"</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="st">  health -&gt; "mosquito net"</span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="st">  health -&gt; "risk of malaria"</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="st">  income -&gt; "eligible for program"</span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="st">  income -&gt; "mosquito net"</span></span>
<span id="cb1-26"><a href="#cb1-26"></a><span class="st">  income -&gt; "risk of malaria"</span></span>
<span id="cb1-27"><a href="#cb1-27"></a><span class="st">  income -&gt; health</span></span>
<span id="cb1-28"><a href="#cb1-28"></a><span class="st">  }'</span></span>
<span id="cb1-29"><a href="#cb1-29"></a>)</span>
<span id="cb1-30"><a href="#cb1-30"></a></span>
<span id="cb1-31"><a href="#cb1-31"></a><span class="fu">plot</span>(mosquito_dag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="2023-06-28_eldoret_causal-inference_files/figure-revealjs/dag2-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="identify-open-paths" class="slide level2">
<h2>Identify Open Paths</h2>
<p><a href="https://evalf22.classes.andrewheiss.com/example/dags.html#mosquito-net-example">Heiss demonstrates</a> how to use {<code>dagitty</code>} package to test assumptions, list pathways, and identify the minimal adjustment sets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="fu">paths</span>(mosquito_dag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>$paths
 [1] "\"mosquito net\" -&gt; \"risk of malaria\""                                                                      
 [2] "\"mosquito net\" &lt;- \"eligible for program\" &lt;- income -&gt; \"risk of malaria\""                                
 [3] "\"mosquito net\" &lt;- \"eligible for program\" &lt;- income -&gt; health -&gt; \"risk of malaria\""                      
 [4] "\"mosquito net\" &lt;- \"household size\" -&gt; \"eligible for program\" &lt;- income -&gt; \"risk of malaria\""          
 [5] "\"mosquito net\" &lt;- \"household size\" -&gt; \"eligible for program\" &lt;- income -&gt; health -&gt; \"risk of malaria\""
 [6] "\"mosquito net\" &lt;- \"nighttime temps\" -&gt; \"risk of malaria\""                                               
 [7] "\"mosquito net\" &lt;- health -&gt; \"risk of malaria\""                                                            
 [8] "\"mosquito net\" &lt;- health &lt;- income -&gt; \"risk of malaria\""                                                  
 [9] "\"mosquito net\" &lt;- income -&gt; \"risk of malaria\""                                                            
[10] "\"mosquito net\" &lt;- income -&gt; health -&gt; \"risk of malaria\""                                                  

$open
 [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE  TRUE  TRUE  TRUE</code></pre>
</div>
</div>
</section>
<section id="identify-minimal-adjustment-set" class="slide level2">
<h2>Identify Minimal Adjustment Set</h2>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a><span class="fu">adjustmentSets</span>(mosquito_dag)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>{ health, income, nighttime temps }</code></pre>
</div>
</div>
<p><br></p>
<div class="columns">
<div class="column" style="width:60%;">
<p>This tells us that we only need to control for <code>health</code>, <code>income</code>, and <code>nighttime temps</code> to identify our causal effect of interest (<code>nets -&gt; malaria risk</code>). We see the same on <a href="http://dagitty.net/m1k_2Mk">DAGitty.net</a>.</p>
</div><div class="column" style="width:40%;">
<center>
<img data-src="img/adjustmentset.png">
</center>
</div>
</div>
</section>
<section id="section-29" class="slide level2" data-background-image="img/road less traveled 22.svg">
<h2></h2>
</section>
<section id="simulated-data" class="slide level2">
<h2>Simulated Data</h2>
<p><a href="https://evalf22.classes.andrewheiss.com/example/dags.html#mosquito-net-example">Heiss simulated data</a> from 1,752 households to show that mosquito nets cause a reduction in malaria risk of 10 points.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1,752 √ó 10
      id net   net_num malaria_risk income health household eligible temperature
   &lt;dbl&gt; &lt;lgl&gt;   &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;     &lt;dbl&gt; &lt;lgl&gt;          &lt;dbl&gt;
 1     1 TRUE        1           33    781     56         2 FALSE           21.1
 2     2 FALSE       0           42    974     57         4 FALSE           26.5
 3     3 FALSE       0           80    502     15         3 FALSE           25.6
 4     4 TRUE        1           34    671     20         5 TRUE            21.3
 5     5 FALSE       0           44    728     17         5 FALSE           19.2
 6     6 FALSE       0           25   1050     48         1 FALSE           25.3
 7     7 TRUE        1           19   1146     65         3 FALSE           27.4
 8     8 FALSE       0           35   1093     75         5 FALSE           29.8
 9     9 FALSE       0           32   1037     60         3 FALSE           27.6
10    10 FALSE       0           40    828     36         3 FALSE           21.3
# ‚Ñπ 1,742 more rows
# ‚Ñπ 1 more variable: resistance &lt;dbl&gt;</code></pre>
</div>
</div>
</section>
<section id="naive-vs-adjusted" class="slide level2">
<h2>Naive vs Adjusted</h2>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1">Model</a></li><li><a href="#tabset-2-2">Results</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(modelsummary)</span>
<span id="cb7-2"><a href="#cb7-2"></a><span class="fu">library</span>(gt)</span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>model_naive <span class="ot">&lt;-</span> <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net, <span class="at">data =</span> mosquito_nets)</span>
<span id="cb7-5"><a href="#cb7-5"></a></span>
<span id="cb7-6"><a href="#cb7-6"></a>model_adjusted <span class="ot">&lt;-</span> <span class="fu">lm</span>(malaria_risk <span class="sc">~</span> net <span class="sc">+</span> income <span class="sc">+</span> temperature <span class="sc">+</span> health,</span>
<span id="cb7-7"><a href="#cb7-7"></a>                     <span class="at">data =</span> mosquito_nets)</span>
<span id="cb7-8"><a href="#cb7-8"></a></span>
<span id="cb7-9"><a href="#cb7-9"></a><span class="co"># Heiss's appropriate warning:</span></span>
<span id="cb7-10"><a href="#cb7-10"></a><span class="co"># Making confounding adjustments with linear regression will result in properly identified causal relationships only under very specific circumstances.</span></span>
<span id="cb7-11"><a href="#cb7-11"></a><span class="co"># See https://www.andrewheiss.com/research/chapters/heiss-causal-inference-2021/10-causal-inference.pdf</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="2023-06-28_eldoret_causal-inference_files/figure-revealjs/malaria2-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="recommended-reading" class="slide level2 nonincremental">
<h2>Recommended Reading</h2>
<ul>
<li class="fragment">Scott Cunningham‚Äôs <a href="ghr.link/cun">‚ÄúCausal Inference: The Mixtape‚Äù</a></li>
<li class="fragment">Nick Huntington-Klein‚Äôs <a href="ghr.link/eff">‚ÄúThe Effect: An Introduction to Research Design and Causality‚Äù</a></li>
<li class="fragment">Richard McElreath‚Äôs <a href="ghr.link/sre">‚ÄúStatistical Rethinking‚Äù</a></li>
<li class="fragment">Morgan and Winship‚Äôs <a href="ghr.link/mor">‚ÄúCounterfactuals and Causal Inference: Methods and Principles for Social Research‚Äù</a></li>
<li class="fragment">Hern√°n and Robins‚Äô, <a href="ghr.link/wha">‚ÄúCausal Inference: What If‚Äù</a></li>
<li class="fragment">Daniel Westreich‚Äôs, <a href="ghr.link/wes">‚ÄúEpidemiology by Design‚Äù</a></li>
</ul>
</section>
<section id="thursday-and-friday-1" class="slide level2">
<h2>Thursday and Friday ü§ù</h2>
<p>Available for 1-on-1s or small group consultation. Sign-up for a slot at <a href="https://ghr.link/meeting-eld23">ghr.link/meeting-eld23</a></p>

<img data-src="img/QR_meeting.png" class="r-stretch"></section>
<section id="slides-and-code" class="slide level2">
<h2>Slides and Code</h2>
<p>Slides: https://ghr.link/ws-eld23-ci</p>
<p>Code: https://github.com/ericpgreen/ghr_workshops</p>
<div class="footer footer-default">

</div>
</section></section>

    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="2023-06-28_eldoret_causal-inference_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'multiplex': {"secret":null,"id":"2387f6b5d551b456","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>